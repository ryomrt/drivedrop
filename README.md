# 📸 DriveDrop - ログイン不要でGoogleドライブに直接写真をアップロード＆共有！

Google Apps Script (GAS) と Google Drive だけで動く、サーバーレスの簡易写真共有ウェブアプリです。
イベント会場でQRコードを配り、参加者がログイン不要でその場で写真をアップロード＆閲覧できるシステムを想定しています。

## 🎯 ターゲット・想定ユースケース

**主に「内輪の小規模なイベント」での利用を想定しています。**

* 🎸 インディーズバンドのライブ、自主企画イベント
* 💍 結婚式の二次会
* 🍻 部活の送別会、サークルの合宿
* （想定規模：数十人〜100人程度）

会場の受付やテーブルにQRコードを置き、「今日撮った写真をここにアップしてね！」と案内する使い方に最適です。

## ⚠️ セキュリティと利用上の注意（必ずお読みください）

本システムは「手軽さ（ログイン不要）」を最優先しているため、**セキュリティは堅牢ではありません。** 以下のリスクを理解した上でご利用ください。

1. **誰でもアクセス・アップロード可能**
* URL（QRコード）を知っていれば、誰でも写真の閲覧・アップロードが可能です。
* パスワード認証等はないため、**SNS等の不特定多数が見る場所へURLを公開しないでください。**


2. **Googleドライブの容量制限**
* アップロードされた写真は、システム管理者のGoogleドライブに直接保存されます。
* 悪意のあるユーザーが大量のデータを送信した場合、ドライブの容量を圧迫する恐れがあります。


3. **機密性の高い写真には不向き**
* ドライブのフォルダは「リンクを知っている全員が閲覧可」に設定する必要があります。個人情報や極めてプライベートな写真の共有には使用しないでください。
* **推奨運用**: イベント終了後、数日〜1週間程度でGASの公開を停止し、ドライブの共有設定をオフにすることを強くお勧めします。

## ✨ 主な機能と特徴

* **📱 ログイン不要**: 参加者はGoogleアカウントを持っていなくてもアップロード可能です。
* **🚀 サクサク送信 (自動圧縮)**: スマホの巨大な写真データも、ブラウザ側で自動リサイズしてから送信するため、通信量も少なく高速です（高画質送信も選択可）。
* **⚡️ 圧倒的な「直結感」 (Optimistic UI)**: 送信した瞬間に、自分の画面に写真がポンッと追加される演出により、待ち時間のストレスがありません。
* **⚙️ メンテナンスが超簡単**: HTML/JSの知識がなくても、`Config.gs` のテキストを書き換えるだけで、イベント名やメッセージ、デザインをカスタマイズできます。
* **🔄 QRコードでかんたん拡散**: ボタンを押すとページ上にQRコードが表示され、参加者同士でURLを教え合うことなく簡単にシェアできます。

## 🛠️ 導入手順 (セットアップ)

### 1. Googleドライブの準備

1. 写真を保存するための新しいフォルダを作成します。
2. フォルダを右クリック ＞ 「共有」＞「共有」を開きます。
3. 一般的なアクセスを **「リンクを知っている全員」** に変更し、権限を **「閲覧者」** にします。
4. フォルダを開き、ブラウザのURLから **フォルダID**（`https://drive.google.com/drive/folders/` の後の英数字の羅列）をコピーしておきます。

### 2. Google Apps Script の作成

1. Googleドライブの左上「＋新規」＞「その他」＞「Google Apps Script」を開きます（または [script.new](https://script.new/) にアクセス）。
2. GitHubの `src` フォルダの中にある以下の3つのファイルの中身を、それぞれコピー＆ペーストして作成します。
   * `コード.gs` (スクリプトファイル ※初期からあるファイル)
   * `Config.gs` (スクリプトファイル)
   * `index.html` (HTMLファイル)

3. `Config.gs` を開き、`FOLDER_ID` の部分に先ほどコピーしたフォルダIDを貼り付けます。イベント名や問い合わせ先なども自由に変更してください。

### 3. デプロイ（一般公開）

ここが一番重要です！参加者がログインなしで使えるように設定します。

1. エディタ画面右上の青いボタン **「デプロイ」** ＞ **「新しいデプロイ」** をクリック。
2. 左側の歯車マークから **「ウェブアプリ」** を選択。
3. 以下の通りに設定します：
* 実行するユーザー: **自分**
* アクセスできるユーザー: **全員** （※ここを「全員」にしないと、他の人が開いた時にログイン画面が出てしまいます）


4. **「デプロイ」** をクリックします。

### 4. 初回アクセスの承認（Auth認証）

デプロイ後、初めて実行する時だけGoogleのセキュリティ警告が出ます。以下の手順で承認してください。

1. 「アクセスを承認」をクリック。
2. 自分のGoogleアカウントを選択。
3. 「このアプリは Google が確認していません」という警告画面が出たら、左下の **「詳細」** ＞ **「（プロジェクト名）に移動」** をクリック。
4. **「許可」** をクリックして完了です。

### 5. 動作確認と参加者へのシェア

1. デプロイ完了画面に表示される **ウェブアプリのURL**（最後が `/exec` で終わるURL）にアクセスして、動作確認を行います。
2. 画面上の「📲 友達に教える」ボタンを押すとQRコードが表示されます。**このQRコードをスクリーンショットして、参加者に配布・案内してください！**


## 🔧 設定を変更した時のアップデート手順

`Config.gs` の文字を変えたり、コードを修正した後は、以下の手順でバージョンアップを行わないと画面に反映されません。

1. エディタ画面右上の青いボタン **「デプロイ」** ＞ **「デプロイを管理」** をクリック。
2. 対象のデプロイを選択し、右上の **「🖊（編集）」** アイコンをクリック。
3. バージョン欄のプルダウンから **「新バージョン」** を選択。
4. **「デプロイ」** をクリック。

※この手順で更新すれば公開URLは変わらないため、**作ったQRコードは再利用できます。**

---

## 🎨 カスタマイズについて

画面に表示される文字やエラーメッセージは、すべて `Config.gs` の `UI_TEXT` 内で管理されています。コード本体を触ることなく、イベントの雰囲気に合わせて自由に言葉をアレンジしてください。

## 🆘 困ったら

カスタマイズ方法やエラーの解決方法がわからない時は、ぜひ [Gemini](https://gemini.google.com/) にコードを貼り付けて質問してみてください！

## 📄 ライセンス

MIT License

ご自由に改変・再配布してご活用ください。

## 🤝 Credits & Acknowledgements

本プロジェクトは、以下の素晴らしいオープンソースやサービスを利用して構築されています。

* **Fonts**
   * [Noto Sans JP](https://fonts.google.com/specimen/Noto+Sans+JP) (Licensed under the SIL Open Font License 1.1)

* **API Services**
   * [QR Code API](https://goqr.me/api/) by goqr.me (Used for generating QR codes dynamically)

* **Icons**
   * GitHub icon provided by [Primer Octicons](https://primer.style/octicons/) (Licensed under the MIT License)

